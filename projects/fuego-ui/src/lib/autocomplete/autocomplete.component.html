<div
	class="autocomplete"
	role="combobox"
	[attr.aria-expanded]="expanded"
	[attr.aria-owns]="listboxId"
	aria-haspopup="listbox"
	[attr.id]="id"
>
	<fue-field
		className="fue-form-field--no-outline fue-form-field--square"
		[formControl]="control"
		[placeholder]="placeholder"
		[ariaAutocomplete]="'list'"
		[ariaControls]="listboxId"
		[ariaLabelledby]="labelId"
		[labelHidden]="labelHidden"
		(hasFocus)="onFieldFocus($event)"
		(keyDownEvent)="onKeyEvent($event)"
		[activeDescendant$]=""
	>
		<field-prefix>
			<img src="./assets/search-outline.png" alt="" role="presentation" />
		</field-prefix>
		<field-label>{{label}}</field-label>
	</fue-field>
	<ul
		class="listbox"
		role="listbox"
		[ngClass]="{'hidden': !expanded}"
		[attr.id]="listboxId"
		[attr.aria-labelledby]="labelId"
	>
		<ng-container *ngIf="options">
			<ng-container *ngFor="let option of options | async; let i = index">
				<li
					class="d-flex align-items-center"
					role="option"
					[attr.id]="id + '-option-' + i"
					(click)="onSelection(option)"
				>
					{{option | valueExtractor : labelKey}}
				</li>
			</ng-container>
		</ng-container>
	</ul>
</div>
